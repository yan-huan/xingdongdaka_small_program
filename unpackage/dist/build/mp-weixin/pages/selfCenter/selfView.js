(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/selfCenter/selfView"],{"0df8":function(t,e,o){"use strict";(function(t){o("4e6c"),o("921b");n(o("66fd"));var e=n(o("2ae6"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},1887:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("2f62");function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function i(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u=function(){o.e("components/actionlist").then(function(){return resolve(o("4f87"))}.bind(null,o)).catch(o.oe)},a=function(){o.e("components/usershow").then(function(){return resolve(o("3209"))}.bind(null,o)).catch(o.oe)},c={components:{usershow:a,actionlist:u},data:function(){return{tab:0,list:[],userId:"",user:t.getStorageSync("id"),total:"",userInfo:t.getStorageSync("userInfo"),lookerList:[],pushId:"",lookTotal:0,looktotals:"",lookerCount:0,likeCount:0,guanzhu:"关注"}},computed:i({},(0,n.mapState)(["hasLogin"])),onShareAppMessage:function(e){var o=this;return"menu"==e.from?o.xdUniUtils.xd_onShare():0==o.tab?{title:o.list[e.target.id].userId==o.user?"第"+o.list[e.target.id].pushCardCishuCount+"次打卡:"+o.list[e.target.id].content:"我为@"+o.list[e.target.id].userName+"打Call："+o.list[e.target.id].content,path:"/pages/index/action/action?pushId="+o.list[e.target.id].id+"&share="+t.getStorageSync("id")+"&isopen="+o.list[e.target.id].isopen,imageUrl:o.list[e.target.id].pictures?o.list[e.target.id].pictures:"../../static/images/icon/img/title1.png"}:1==o.tab?{title:o.lookerList[e.target.id].userId==o.user?"第"+o.lookerList[e.target.id].pushCardCishuCount+"次打卡:"+o.lookerList[e.target.id].content:"我为@"+o.lookerList[e.target.id].userName+"打Call："+o.lookerList[e.target.id].content,path:"/pages/index/action/action?pushId="+o.lookerList[e.target.id].id+"&share="+t.getStorageSync("id")+"&isopen="+o.lookerList[e.target.id].isopen,imageUrl:o.lookerList[e.target.id].pictures?o.lookerList[e.target.id].pictures:"../../static/images/icon/img/title1.png"}:void 0},onShow:function(){},onLoad:function(t){wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]}),this.userId=t.userId,this.getCardList(),this.getLookerList(),this.getIsAttention(),this.lookerCountData()},methods:{lookerCountData:function(){var t=this;t.xd_request_post(t.xdServerUrls.xd_getLookerCountByUserId,{userId:t.userId},!0).then((function(e){0==e.resultCode&&(t.lookerCount=e.obj.lookerCount,t.likeCount=e.obj.likeCount)}))},clidtags:function(e){var o=this;"已关注"!=this.guanzhu&&this.xd_request_post(this.xdServerUrls.xd_saveAttention,{userId:t.getStorageSync("id"),attentionUserId:e.id},!0).then((function(e){0==e.resultCode?(o.guanzhu="已关注",t.showToast({icon:"none",title:"关注成功"})):t.showToast({icon:"none",title:e.msg})}))},goPush:function(e){t.navigateTo({url:"../index/action/action?pushId="+e})},lookerClick:function(e,o){var n=this;if(!t.getStorageSync("token"))return t.navigateTo({url:"../../login/login"}),!1;n.userId=t.getStorageSync("id"),n.xd_request_post(n.xdServerUrls.xd_saveLooker,{pushId:e.id,lookUserId:n.userId},!0).then((function(e){0==e.resultCode?(n.list[o].onlooker=!0,n.list[o].lookerCount++,t.showToast({title:"围观成功",duration:1e3,icon:"none"})):10015==e.resultCode&&t.showToast({title:"您已经围观了",duration:1e3,icon:"none"})}))},getIsAttention:function(){var e=this;this.userId==t.getStorageSync("id")?this.guanzhu="":this.xd_request_post(this.xdServerUrls.xd_iSAttention,{userId:t.getStorageSync("id"),attentionUserId:this.userId},!0).then((function(t){var o=t.obj;e.guanzhu=o?"已关注":"关注"}))},getShowFollow:function(){var t=this;this.xd_request_post(this.xdServerUrls.xd_getLookerCountByUserId,{userId:userId},!0).then((function(e){t.looktotals=e.obj.total})).catch((function(t){}))},getCardList:function(){var e=this;this.xd_request_post(this.xdServerUrls.xd_pushByUserIdList,{token:t.getStorageSync("token"),lookUserId:t.getStorageSync("id"),userId:this.userId},!0).then((function(t){e.list=e.timeStamp(t),e.total=t.obj.total}))},timeStamp:function(t){for(var e=t.obj.list,o=0;o<t.obj.list.length;o++)e[o].challengeRmb=Math.floor(e[o].challengeRmb/100);return e},getLookerList:function(){var t=this;this.xd_request_post(this.xdServerUrls.xd_lookerPushListByUserId,{userId:this.userId,pageNum:1,pageSize:10},!0).then((function(e){t.lookerList=t.timeStamp(e),t.lookTotal=e.obj.total,t.lookerList.forEach((function(t){"undefined"===typeof t.pictures||""==t.pictures?t.pictures="../../static/images/icon/img/title1.png":t.pictures.indexOf(",")>-1&&(t.pictures=t.pictures.split(",")[0])}))}))}}};e.default=c}).call(this,o("543d")["default"])},"2ae6":function(t,e,o){"use strict";o.r(e);var n=o("676b"),r=o("f293");for(var i in r)"default"!==i&&function(t){o.d(e,t,(function(){return r[t]}))}(i);o("2baa");var s,u=o("f0c5"),a=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=a.exports},"2baa":function(t,e,o){"use strict";var n=o("9ab7"),r=o.n(n);r.a},"676b":function(t,e,o){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.tab=0},t.e1=function(e){t.tab=1})},i=[];o.d(e,"b",(function(){return r})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}))},"9ab7":function(t,e,o){},f293:function(t,e,o){"use strict";o.r(e);var n=o("1887"),r=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=r.a}},[["0df8","common/runtime","common/vendor"]]]);