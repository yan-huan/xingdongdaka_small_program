(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/cardDetails/cardDetails"],{"06f0":function(t,e,n){},"10f6":function(t,e,n){"use strict";(function(t){n("4e6c"),n("921b");s(n("66fd"));var e=s(n("9e34"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"1ee1":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n("2f62");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){n.e("components/imt-audio/imt-audio").then(function(){return resolve(n("844f"))}.bind(null,n)).catch(n.oe)},u=(t.createInnerAudioContext(),{components:{imtAudio:a},data:function(){return{audioPlaySrc:"../../../static/images/icon/img/ti.png",showInput:!1,pusCardLists:void 0,value:"",id:t.getStorageSync("id"),userId:t.getStorageSync("id"),inputType:2,cardId:"",dataCardId:"",indexId:"",pushUserId:"",commentId:"",pushId:"",tolist:!1,conmmmenttext:"请输入评论内容",showCardCommentlist:"",guanzhu:"关注",pushCardCreateTime:"",dakacishu:0}},computed:i({},(0,s.mapState)(["hasLogin"])),onShareAppMessage:function(e){var n=this;if(!n.hasLogin)return t.navigateTo({url:"../../login/login"}),!1;if("menu"==e.from)return n.xdUniUtils.xd_onShare();n.setSaveShareInfo();var s=n.pusCardLists.userId==n.userId?"第"+n.dakacishu+"次打卡:"+n.pusCardLists.pushCardList[0].content:"我为@"+n.pusCardLists.userName+"打Call："+n.pusCardLists.pushCardList[0].content,r="/pages/index/action/action?pushId="+n.pusCardLists.id+"&share="+n.id+"&isopen="+n.pusCardLists.isopen,i=n.showCardCommentlist.pushCard.pictures[0]?n.showCardCommentlist.pushCard.pictures[0]:"https://chucun2019.oss-cn-beijing.aliyuncs.com/dynamic/1595733463227.png";return n.xdUniUtils.xd_onShare(s,r,i)},onLoad:function(t){wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]}),this.pushId=t.pushId,this.cardId=t.cardId,1==t.show&&(this.showInput=!0),this.getshowCardComment(),this.getpushList()},methods:{lookerClick:function(e){var n=this;if(!n.hasLogin)return t.navigateTo({url:"../login/login"}),!1;n.userId=t.getStorageSync("id"),n.xd_request_post(n.xdServerUrls.xd_saveLooker,{pushId:e.id,lookUserId:n.userId},!1).then((function(e){0==e.resultCode?(n.pusCardLists.onlooker=!0,n.pusCardLists.onlookerCount++,1!=t.getStorageSync((new Date).toLocaleDateString()+"dycwgKey")?t.showModal({content:n.xdCommon.gzsm_wgglts,showCancel:!1,buttonText:"知道了",success:function(e){e.confirm?t.setStorageSync((new Date).toLocaleDateString()+"dycwgKey",1):e.cancel&&t.setStorageSync((new Date).toLocaleDateString()+"dycwgKey",1)}}):t.showToast({title:"围观成功",duration:1e3,icon:"none"})):t.showToast({title:e.msg,duration:1e3,icon:"none"})}))},goAction:function(e){t.navigateTo({url:"/pages/index/action/action?pushId="+e})},setSaveShareInfo:function(){this.xd_request_post(this.xdServerUrls.xd_saveShareInfo,{pushId:this.pusCardLists.id,shareUserId:t.getStorageSync("id")},!0).then((function(t){console.log(t)}))},goUser:function(e){if(!this.hasLogin)return t.navigateTo({url:"../../login/login"}),!1;t.navigateTo({url:"../../selfCenter/selfView?userId="+e})},goSteps:function(){t.navigateTo({url:"../../selfCenter/clockIn?pushId="+this.pusCardLists.id})},goPageImg:function(t,e){this.xdUniUtils.xd_showImg(t,e)},error:function(){this.audioPlaySrc=this.xdUniUtils.xd_randomImg()},getshowCardComment:function(){var t=this;this.xd_request_post(this.xdServerUrls.xd_showCardComment,{cardId:this.cardId},!0).then((function(e){var n=e.obj,s=[];""!=n.pushCard.pictures?(s=n.pushCard.pictures.split(","),n.pushCard.pictures=s):n.pushCard.pictures=[],t.showCardCommentlist=n}))},userRepaly:function(e,n){if(e.userId==this.id)return t.showToast({title:"无法回复自己",duration:1e3,icon:"none"}),!1;this.commentId=e.id,this.showInput=!0,this.userId=e.userId,this.dataCardId=e.cardId,this.inputType=1,this.conmmmenttext="回复："+e.userName},inputComent:function(e){var n=this;1==this.inputType?this.xdUniUtils.xd_request_text({content:this.value}).then((function(e){if(0!=e.obj.errcode)return t.showToast({title:"内容包含敏感内容",mask:!0,duration:2e3}),!1;n.xd_request_post(n.xdServerUrls.xd_saveCardReplayComment,{replayUserId:n.userId,commentId:n.commentId,cardId:n.dataCardId,userId:n.id,content:n.value},!0).then((function(t){if(n.showInput=!1,n.value="",0==t.resultCode){var e=t.obj;n.showCardCommentlist=e}}))})):2==this.inputType&&this.xdUniUtils.xd_request_text({content:this.value}).then((function(e){if(0!=e.obj.errcode)return t.showToast({title:"内容包含敏感内容",mask:!0,duration:2e3}),!1;n.xd_request_post(n.xdServerUrls.xd_saveCardComment,{cardId:n.dataCardId?n.dataCardId:n.cardId,userId:n.id,content:n.value},!0).then((function(t){if(n.showInput=!1,n.value="",0==t.resultCode){var e=t.obj;n.showCardCommentlist=e}}))}))},InputBlur:function(t){this.value=t.detail.value},showInputComent:function(){if(!this.hasLogin)return t.navigateTo({url:"../../login/login"}),!1;this.showInput=!this.showInput,this.inputType=2,this.conmmmenttext="请输入评论内容"},getpushList:function(){var e=this;this.xd_request_post(this.xdServerUrls.xd_pushDataByPushId,{pushId:this.pushId,token:t.getStorageSync("token")},!0).then((function(n){var s=n.obj;s.challengeRmb=n.obj.challengeRmb/100;var r=e.xdUniUtils.xd_timestampToTime(n.obj.createTime,!1,!1,!0);s.createTime=r,e.pusCardLists=s,e.pushCardCreateTime=e.xdUniUtils.xd_timestampToTime(e.pusCardLists.pushCardList[0].createTime,!1,!0,!1),s.userId==t.getStorageSync("id")?e.guanzhu="":e.xd_request_post(e.xdServerUrls.xd_iSAttention,{userId:t.getStorageSync("id"),attentionUserId:s.userId},!0).then((function(t){t.obj?e.guanzhu="已关注":e.guanzhu="关注"})),void 0!==typeof s.pushCardList&&(s.pushCardList.forEach((function(t){e.cardId==t.id&&(e.dakacishu=t.cardIndex)})),0==e.dakacishu&&(e.dakacishu=e.pusCardLists.pushCardCishuCount))}))},strToArr:function(t){for(var e=t,n=0;n<t.length;n++)t[n].pushCard.pictures&&(e[n].pushCard.pictures=t[n].pushCard.pictures.split(","));return e},tags:function(){var e=this;"已关注"!=this.guanzhu&&this.xd_request_post(this.xdServerUrls.xd_saveAttention,{userId:t.getStorageSync("id"),attentionUserId:this.pusCardLists.userId},!0).then((function(n){0==n.resultCode?(e.guanzhu="已关注",t.showToast({icon:"none",title:"关注成功"})):t.showToast({icon:"none",title:n.msg})}))}}});e.default=u}).call(this,n("543d")["default"])},"9e34":function(t,e,n){"use strict";n.r(e);var s=n("f6fc"),r=n("9f8e");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("e2fd");var o,a=n("f0c5"),u=Object(a["a"])(r["default"],s["b"],s["c"],!1,null,"f31c49ac",null,!1,s["a"],o);e["default"]=u.exports},"9f8e":function(t,e,n){"use strict";n.r(e);var s=n("1ee1"),r=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e["default"]=r.a},e2fd:function(t,e,n){"use strict";var s=n("06f0"),r=n.n(s);r.a},f6fc:function(t,e,n){"use strict";var s={imtAudio:function(){return n.e("components/imt-audio/imt-audio").then(n.bind(null,"844f"))}},r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s}))}},[["10f6","common/runtime","common/vendor"]]]);